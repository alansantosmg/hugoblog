---
author: Alan Santos
authorEmoji: üë®üèª‚Äçüíª
authorDesc: Consultor em TI | Mestre em Sistemas de informa√ß√£o
authorImage: "/images/whoami/avatar.jpg"
categories:
- Dev
date: "2020-01-28T15:34:54Z"
description: Aprenda a manter o hist√≥rico de altera√ß√µes de arquivos no Vim, mesmo fechando o editor. Saiba como parametrizar identa√ß√£o do c√≥digo, numera√ß√£o das linhas e muito mais.

tags:
- Vim
- Linux
series:
- Configurando o Vim p/ dev web
title: Vim para dev Web - Parte III
---

Ol√°! Aqui estamos com o terceiro artigo da s√©rie, "Configurando o Vim para desenvolvimento Web". Vamos come√ßar fazendo uma pequena revis√£o sobre o artigo anterio e depois prosseguiremos realizando mais configura√ß√µes em nosso ambiente de desenvolvimento.

## Recapitulando a parte II
Se voc√™ seguiu o post anterior, o arquivo `.vimrc` que voc√™ criou no seu diret√≥rio home, dever√° estar assim:

```
source $VIMRUNTIME/defauts.vim
set nocompatible
set encoding=utf-8
set nobackup
set nowritebackup
set noswapfile
set number
set ruler
syntax on
set visualbell
```

## Configura√ß√µes de texto
Hoje, vamos realizar algumas configura√ß√µes de apresenta√ß√£o e formata√ß√£o de textos para
desenvolvimento, como indenta√ß√£o, configura√ß√£o de tabula√ß√£o (tabs) e tamb√©m par√¢metros de
busca, al√©m de persistir os hist√≥ricos de √∫ltimos comandos e √∫ltimas altera√ß√µes. M√£o na massa!

### Par√¢metros de busca

1. Ignora mai√∫sculas e min√∫sculas nas buscas.
2. Se come√ßar uma busca em mai√∫sculo ele habilita o case.
3. Destaca no texto, termos procurados na busca.
4. Inicia busca a medida que caracteres s√£o digitados.

```
set ignorecase
set smartcase
set hlsearch
set incsearch
```

### Regras de indenta√ß√£o de c√≥digo

1. Aplica indenta√ß√£o na linha atual, (por ex: dentro de uma fun√ß√£o) ao teclar `enter`.
2. Usa regras de indenta√ß√£o de acordo com a extens√£o do arquivo editado. Necessita da configura√ß√£o autoident setada.
3. Habilita indenta√ß√£o conforme o tipo de arquivo.
4. Habilita tabula√ß√£o inteligente conforme o tipo (extens√£o) do arquivo.
5. Tranforma tabs em espa√ßos.
6. Configura tamanho da tabulacao padr√£o como 2 espa√ßos.
7. Garante que backspace consiga remover indenta√ß√µes, apagar fim e come√ßo de linha.
8. N√∫mero de espa√ßos percorridos (2) ao teclar backspace (voltar tabula√ß√£o).
9. Por padr√£o, quando usando auto-indent usar 2 espa√ßos (1 tabstop) usando shiftwidth e
   softtabstop.
```
set autoindent
set smartindent
set filetype indent on
set smarttab
set expandtab
set tabstop=2
set backspace=ident, eol, start
set backspace=2
set shiftwidth=2
set softtabstop=2
```

### Hist√≥rico de comandos e altera√ß√µes

#### Aumentando o tamanho dos hist√≥ricos

Al√©m das configura√ß√µes de texto, talvez seja importante aumentar o tamanho do hist√≥rico de
√∫ltimas altera√ß√µes e hist√≥rico de √∫ltimos comandos, al√©m de manter esses dois hist√≥ricos mesmo
se o arquivo for salvo e/ou ou o Vim for fechado. Bacana, n√£o acha? Vamos configurar:

1. Desfazer at√© 1000 altera√ß√µes
2. Guarda hist√≥rico dos 1000 √∫ltimos comandos
```
set undolevels =1000
set history=1000
```

#### Persistindo o hist√≥rico de comandos

1. Para armazenar o hist√≥rico de comandos, precisamos criar um arquivo. O melhor √© que ele
   seja criado fora do diret√≥rio onde o arquivo est√° sendo editado. O Vim cria um diret√≥rio oculto dentro do diret√≥rio home do usu√°rio. √â interessante deixar tudo junto, ent√£o dentro do diret√≥rio `/home/nomeDoUsu√°rio/.vim` vamos criar um subdiret√≥rio chamado `infodir`. Para isso ser√° preciso digitar o seguinte comando no terminal:
```
mkdir ~/.vim/infodir
```
2. Uma vez criado o diret√≥rio infodir, podemos parametrizar o .vimrc com a seguinte linha para guardar o hist√≥rico de comandos dentro do arquivo `viminfo`:
```
set viminfo='10,\"30,:20,%,n~/.vim/infodir/viminfo
```
3. Al√©m disso tamb√©m podemos parametrizar o Vim para iniciar com o cursor no mesmo lugar onde estava (atrav√©s da informa√ß√£o armazenada no viminfo) quando o arquivo foi fechado (caso volte a edit√°-lo posteriormente):
```
au BufReadPost * if line("'\"")|execute("normal `\"")|endif
```

#### Persistindo o hist√≥rico de altera√ß√µs

1. O vim pode manter arquivos com hist√≥rico de altera√ß√µes. Como ele cria um arquivo de hist√≥rico de altera√ß√µes para cada arquivo editado, o melhor √© criar um subdiret√≥rio dentro de `/home/user/.vim/`. Voc√™ deve criar esse diret√≥rio usando o terminal:
```
mkdir ~/.vim/undodir
```
2. Dentro do diret√≥rio undodir ser√£o criados os arquivos que guardar√£o as altera√ß√µes dos arquivos editados. Mesmo se vc salvar e fechar o arquivo que est√° trabalhando, ser√° poss√≠vel posteriormente desfazer altera√ß√µes se voltar a edit√°-lo. Como j√° temos nosso diret√≥rio `undodir` agora vamos parametrizar o `.vimrc`:
```
set undodir=~/.vim/undodir
set undofile
```

## Finalizando

Bem, vamos ficar por aqui. No pr√≥ximo artigo, iremos incluir algumas melhorias para tornar o editor ainda mais amig√°vel e interessante para desenvolvimento e tamb√©m uso geral.

Espero que tenham gostado e at√© a pr√≥xima.
