---
author: Alan Santos
authorEmoji: üë®üèª‚Äçüíª
authorDesc: Consultor em TI | Mestre em Sistemas de informa√ß√£o
authorImage: "/images/whoami/avatar.jpg"
title: Vim para dev Web - Parte IV
categories:
- Programa√ß√£o
- Tecnologia
date: "2020-02-03T15:34:54Z"
description: Saiba porque √†s vezes o Vim parece travar sem motivo algum e aprenda como evitar que isso ocorra novamente.
tags:
- Vim
- Linux
series:
- Configurando o Vim p/ dev web
---

Ol√° pessoal. No artigo de hoje, realizaremos mais algumas configura√ß√µes no arquivo `.vimrc` que ajudar√£o a melhorar a experi√™ncia com o editor.

# Melhorando a usabilidade

## Evitando travamentos

Uma das coisas mais chatas que ocorria  quando eu comecei a usar o Vim, eram travamentos ocasionais do editor dito como "super est√°vel e leve". Ao investigar mais a fundo a quest√£o, acabei descobrindo que o problema n√£o estava no software e sim em quem est√° sentado na cadeira operando (risos).

De fato, o que ocorria era o seguinte: por uma quest√£o de h√°bito quando trabalhava com outros editores, eu costumava dar um  `<Ctrl> <s>` de tempos em tempos para garantir que meu trabalho fosse salvo. Essa atividade estava t√£o enraizada no subconsciente que eu nem percebia que estava fazendo isso tamb√©m no Vim.

Ao realizar essa a√ß√£o "autom√°tica", o Vim parecia ficar travado, mas a verdade √© que o  `<ctrl> <s>` √© um comando que desliga o fluxo de transmiss√£o de dados do editor.

> Se o Vim travar repentinamente, experimente teclar `<ctrl><q>` para faz√™-lo voltar ao normal.

Quem vem de outros editores certamente passar√° por essa situa√ß√£o em algum momento. Ent√£o para previnir sua ocorr√™ncia, basta adicionarmos um par√¢metro ao nosso arquivo `.bashrc` que fica no diret√≥rio `/home/nomeDoUsu√°rio`. Para fazer isso, abra um terminal e digite o seguinte comando:
```
echo "stty -ixon" >> ~/.bashrc
```
O comando acima adiciona a linha contendo `stty -ixon` ao final do arquivo `.bashrc`. Outra forma de incluir seria abrir o arquivo no Vim e incluir a parametriza√ß√£o no final dele. Fique √† vontade para fazer da forma que achar melhor.


## Mais altera√ß√µes no .vimrc

Vamos adicionar mais alguns par√¢metros interessantes ao nosso `.vimrc`.

### Tchau tela de boas-vindas
Come√ßaremos tirando  aquela tela inicial de boas-vindas. Assim o editor abrir√° direto numa janela em branco. Parece bobagem, mas ser√°  1 tecla a menos pressionada, toda vez que voc√™ iniciar o editor.
```
set shortmess+=I
```

###  Refresh de altera√ßoes externas
Muitas vezes, acabamos realizando altera√ß√µes em arquivos que est√£o abertos no Vim usando outra aplica√ß√£o. Para que o Vim perceba que o arquivo foi alterado externamente, precisamos incluir um par√¢metro que far√° o editor ler novamente o arquivo em que estamos trabalhando caso ele tenha sido modificado. Inclua no seu `.vimrc`:
```
set autoread

```
###  Melhorando o scroll
Outro par√¢metro interessante √© fazer a rolagem da tela iniciar antes do cursor chegar na borda superior ou inferior da janela, tornando a navega√ß√£o menos cansativa. Adicione ao seu `.vimrc`:
```
set scrolloff=5
```

### Novas janelas
O Vim permite trabalhar com v√°rias janelas dividas na tela, seja na horizontal, vertical ou ambos. Nos par√¢metros abaixo, configuramos o editor para abrir janelas horizontais, sempre abaixo da janela atual. No caso de janelas verticais, tamb√©m √© interessante parametrizar para abrir sempre √† direita da janela atual. Assim quem est√° usando, sempre saber√° onde a nova janela ser√° aberta. Vamos colocar esses 2 par√¢metros em nosso `.vimrc`:
```
set splitbelow
set splitright
```

### Status sempre √† mostra
No `.vimrc` vamos incluir um par√¢metro para sempre deixar √† mostra a barra de status.
```
set lastsatus=2
```

### Mostrando comandos digitados
Al√©m de sempre mostrar a barra de status, tamb√©m vamos parametrizar o Vim para sempre podermos ver os comandos digitados, incluindo em nosso `.vimrc`:
```
set showcmd
```

### Escondendo buffer
Outro par√¢metro relacionado √† barra de comandos, refere-se ao que o Vim faz quando fechamos um buffer (arquivo carregado na mem√≥ria pelo Vim). Para n√£o ter que ficar fechando e abrindo o mesmo arquivo, podemos habilitar o recurso de esconder o buffer da tela. Acrescente no seu `.vimrc`:
```
set hidden
```

### Autocompletando comandos
Podemos habilitar o autocompletar para comandos com a tecla TAB, igual ao funcionamento no shell bash:
```
set wildmode=longest,list
```

### Linha de comando dupla
Tamb√©m podemos ter uma linha de comando um pouco maior abaixo da barra de status, acrescentando:
```
set cmdheight=2
```

### Alertas visuais
Para o editor n√£o ficar apitando na cabe√ßa a cada erro, que tal adicionar um par√¢metro que converte avisos sonoros em visuais? Inclua a√≠ no `.vimrc`:
```
set t_vb=
```

###  Desligando o match de []{}()
1. O par√¢metro abaixo Desabilita o destaque de conjuntos de paranteses, aspas, etc. Alguns desenvolvedores gostam de manter isso ligado. Eu prefiro desabilitar pois confunde na hora da digita√ß√£o. Para habilitar use 2 par√¢metros: `set showmatch` e `set matchtime = 2`. Para desabilitar, use o que est√° abaixo:
```
set noshowmatch
```

2. Uma alternativa ao `showmatch` que pode melhorar a usabilidade √© alterar a cor de destaquedo cursor quando em cima de conjuntos de parenteses, aspas, colchetes:
```
hi MatchParen cterm=bold ctermbg=none ctermfg=red
```

### Destacando o cursor
Outra parametriza√ß√£o controversa √© mostrar a linha em que o cursor se localiza no momento em um tom mais claro. Use se gostar:
```
set cursorline
```

### Evitando erros ao sair
Na pressa, √†s vezes queremos teclar wq para sair do editor e teclamos por exemplo Wq, ocasionando erro. Para evitar esse tipo de coisa, vamos criar alguns aliases que facilitar√£o em muito a vida:
```
cab W w
cab  Wq wq
cab wQ wq
cab WQ wq
cab Q q
```

### Mudando a tecla LEADER
No vim, a tecla LEADER normalmente √© a /  .Podemos alter√°-la para ser a tecla de v√≠rgula: :
```
let mapleader=","
```

### Limpeza do destaque de buscas
A pr√≥xima parametriza√ß√£o, mapeia <espa√ßo> para limpar o destaque da busca (quando vc busca termo errado). Se quiser limpar a busca digite <,> (v√≠rgula) e a seguir <espa√ßo> configurando o seguinte no seu `.vimrc`:
```
nnoremap <leader><space> : nohlsearch<CR>
```

### Sele√ß√£o com setas (Windows like)
Particularmente, considero a pr√≥xima parametriza√ß√£o altamente dispens√°vel, visto que o vim possui um jeito muito melhor de fazer sele√ß√µes com o teclado atrav√©s do modo visual, teclando no modo normal `v` para selecionar na linha, `V` para selecionar linhas inteiras, ou ainda `<ctrl> v`, para selecionar blocos de texto, inclusive no sentido de colunas.

Para quem est√° acostumado a fazer sele√ß√µes usando as teclas <shift> + SETA, como no Windows, basta adicionar as linhas abaixo ao `.vimrc`.
```
set selectmode=mouse,key
set mousemodel=popup
set keymodel=startsel,stopsel
set selection=exclusive
```

### Edi√ß√£o no diret√≥rio corrente
A configura√ß√£o abaixo permite que  ao editar um arquivo, o Vim mude o contexto para o diret√≥rio em que mesmo se encontra. Muito √∫til quando abrimos o arquivo no Vim a partir de outro diret√≥rio e lembramos que queremos alterar algum outro arquivo nesse mesmo diret√≥rio.
```
set autochdir
```

## Finalizando
Dessa vez fizemos mudan√ßas substanciais no comportamento do Vim de modo a melhorar a usabilidade e evitar erros bobos que tomam muito tempo. No pr√≥ximo artigo falaremos um pouco sobre temas/esquemas de cores. O uso de esquemas de cores, al√©m de melhorar a legibilidade, tornam o editor mais atraente para uso.

At√© a pr√≥xima!
